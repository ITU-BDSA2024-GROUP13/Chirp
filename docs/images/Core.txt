@startuml
!pragma useIntermediatePackages false
skinparam groupInheritance 2

package "Chirp.Core.Entities" {

class Author {
    + Cheeps: List<Cheep>
    + Followers: List<Author>
    + FollowedBy: List<Author>
    + LikedCheeps: List<Cheep>
    + DislikedCheeps: List<Cheep>
}

class Cheep {
    + CheepId: int
    + Text: string
    + TimeStamp: Datetime
    + AuthorId: string
    + Likes: List<Author>
    + Dislikes: List<Author>
    + LocalLikeRatio: float
    + Author: Author
    + Image: string
}

Author "1" -- "0..N" Cheep : has >
Author "0..N" -- "0..N" Author : follows 
Author "0..N" -- "0..N" Cheep : likes >
Author "0..N" -- "0..N" Cheep : dislikes >

note left of Cheep::Text
  Cannot be more than 160 characters long
end note

}

package Microsoft.AspNetCore.Identity{

    class IdentityUser {
        + Id: TKey
        + UserName: string
        + Email: string
        + PasswordHash: string
        + PhoneNumber: string
    }
    


}


package Chirp.Core.DTO.AuthorDTO{


class AuthorDTO {
    + Id: string
    + Name: string
    + Email: string
}

class NewAuthorDTO {
    + Name: string
    + Email: string
}
}

package Chirp.Core.DTO.CheepDTO{


class CheepDTO {
    + Id: int
    + TimeStamp: long
    + Text: string
    + Author: string
    + AuthorId: string
    + Likes: int
    + Dislikes: int
}

class NewCheepDTO {
    + Timestamp: long
    + Text: string
    + Author: string
    + AuthorId: string
    + Likes: int
    + Dislikes: int
    + Image: string
}

note left of NewCheepDTO::Likes
  Set to 0 as default. Same with dislikes
end note

note "Images are optional" as N1

class UpdateCheepDTO {
    + Text: string
}




class CheepDTOForRelevance {
    + Id: int
    + Timestamp: long
    + Author: string
    + Dislikes: int
    + LocalLikeRatio: float
    + isFollowing: bool
    + isDisliked: bool
    + Image: string
}

}


Author -up-|> IdentityUser


note top of Chirp.Core.DTO : Id's are autogenerated upon creation

@enduml
