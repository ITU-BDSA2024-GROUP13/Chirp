@page "/users/{author}"
@using Chirp.Web.models
@model Chirp.Web.models.UserTimelineModel
@{
    ViewData["Title"] = "Chirp!";
    Layout = "./Shared/_Layout.cshtml";
    var routeName = HttpContext.GetRouteValue("author");
    ViewData["Location"] = $@"{routeName}";
}

@await Html.PartialAsync("_Nav", new NavPartialView {
    Count = @Model.Count,
    NextPage = @Model.NextPage,
    PreviousPage = @Model.PreviousPage,
    CurrentPage = @Model.CurrentPage,
    LastPage = @Model.LastPage,
    SearchName = @Model.SearchName
})

<h2 class="name-timeline"> @routeName's Timeline </h2>
@if (Model.Cheeps.Any())
{
    @foreach (var cheep in Model.Cheeps)
    {
        @await Html.PartialAsync("_Cheep", new CheepPartialView {
            Author= cheep.Author,
            Body= cheep.Text,
            Date= cheep.Timestamp
        })
    }
}
else
{
    <em>There are no cheeps so far.</em>
}